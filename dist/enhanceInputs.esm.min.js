const{abs:e,acos:t,asin:n,atan:i,atan2:l,ceil:a,cos:s,exp:o,floor:c,log:r,hypot:u,max:d,min:p,pow:f,random:m,round:v,sin:b,sqrt:y,tan:h,PI:w}=Math;function g(e={},t="settings"){if(t){let n=JSON.stringify(e);localStorage.setItem(t,n)}}function L(e={}){for(let t in e){let n=e[t],i=!0===n||!1===n;(t?document.querySelectorAll(`[name=${t}]`):[]).forEach(e=>{let t=e.type?e.type:e.nodeName.toLowerCase(),l="select-one"===t||"select-multiple"===t;if(i)e.checked=n;else if(l){Array.from(e.options).forEach(e=>{e.selected=!!n.includes(e.value)})}else if("radio"===t){let t=e.value===n;e.checked=!!t}else e.value=n})}}function x(e,t={}){return e.forEach(e=>{E(e,t)}),t}function E(e,t={}){let n=e.name,i=e.type?e.type:e.nodeName.toLowerCase(),l="select-one"===i||"select-multiple"===i,a=e.value;if("checkbox"===i)t[n]=!!e.checked;else if(l){let a=!!l&&"select-multiple"===i,s=e.options,o=Array.from(s).filter(e=>e.selected);t[n]=a?o.map(e=>e.value):o[0].value}else if("radio"===i){let e=document.querySelector(`[name=${n}]:checked`);t[n]=e?e.value:null}else{let l=parseFloat(a).toString()===a;"password"!==i&&(t[n]=l?+a:e.value)}return t}const $=new Event("settingsChange");function k(e={},t="settings"){let n=document.getElementById("btnResetSettings");n&&n.addEventListener("click",n=>{!function(e={}){e.defaults&&Object.assign(e,e.defaults)}(e),localStorage.removeItem(t),L(e),g(e,t),document.dispatchEvent($)})}function S(){!function(e="",t="",n=""){let i=document.querySelectorAll("[data-tools]");for(let l=0,a=i.length;l<a;l++){let a=i[l];if(a.closest(`.${e}`))continue;a.spellcheck=!1;let s=a.previousElementSibling,o=s&&"label"===s.nodeName.toLowerCase()?s:null;o.classList.add("label-textarea");let c=a.getAttribute("accept"),r=document.createElement("div");r.classList.add(e,"input-wrap-boxed","input-wrap-wide"),a.parentNode.insertBefore(r,a),a.classList.add("input-textarea","no-focus");let u=document.createElement("header");u.classList.add(t),r.append(u),o&&u.append(o),r.append(a);let d=a.dataset.file,p=a.dataset.tools.split(" "),f=`<div class="${n}">`,m={copy:"square-2-stack",download:"arrow-down-tray",upload:"arrow-up-tray"};p.forEach(e=>{"size"!==e?f+=`<button type="button" data-icon="${m[e]}" class="btn btn-non btn-toolbar btn-${e}" title="${e}" data-btn="${e}"></button>`:"size"==e&&(f+=`<div  class="textarea-size usr-slc-non" title="${e}"></div>`),"download"===e&&(f+=`<a href="" class="sr-only link-download" download="${d}"></div>`),"upload"===e&&(f+=`<input type="file" class="sr-only input-file" accept="${c}" >`)}),u.insertAdjacentHTML("beforeend",f),q(u,e,t,n)}}("input-wrap-textarea","input-wrap-textarea-header","input-wrap-textarea-header-toolbar")}function q(e=null,t="",n="",i=""){let l=e.querySelectorAll(".btn-toolbar"),a=e.querySelector(".textarea-size");const s=e=>{let t=e.value.trim().length/1024,n=t<1024?"KB":"MB";return+(t<1024?t:t/1024).toFixed(3)+" "+n};let o=a.closest(`.${t}`).querySelector("textarea");o&&(a.textContent=s(o),((e,t)=>{let n=e.value;requestAnimationFrame(function i(){e.value!==n&&(n=e.value,t.textContent=s(e)),requestAnimationFrame(i)})})(o,a)),l.forEach(e=>{let n=e.dataset.btn,i=e.closest(`.${t}`);if("upload"===n){i.querySelector("input[type=file]").addEventListener("input",async e=>{let n=e.currentTarget,i=n.closest(`.${t}`).querySelector("textarea"),l=n.files[0];if(l){let e=await l.text();i.value=e,i.dispatchEvent(new Event("input"))}})}e.addEventListener("click",e=>{let i=e.currentTarget.closest(`.${t}`),l=i.querySelector("textarea").value;if("copy"===n)navigator.clipboard.writeText(l);else if("download"===n){let e=i.querySelector(".link-download"),t=e.getAttribute("download")?e.getAttribute("download").split(".").slice(-1)[0]:"plain",n=URL.createObjectURL(new Blob([l],{type:`text/${t}`}));e.href=n,e.click()}else if("upload"===n){i.querySelector("input[type=file]").click()}})})}function A(e){let t=e.closest(".input-wrap-number");if(t)return;let n=(e.max?e.max.toString().length:0)+(e.step?e.step.toString().length:0);n&&e.classList.add(`input-number-${n}`),t=document.createElement("div"),t.classList.add("input-wrap","input-wrap-boxed","input-wrap-number"),e.parentNode.insertBefore(t,e),t.append(e),e.type="text",e.title="Use Mousewheel or arrow keys to change values",e.classList.add("input-number","no-focus");t.insertAdjacentHTML("beforeend",'<div class="input-number-btns">\n        <button type="button" class="input-number-btn input-number-btn-minus no-focus">&minus;</button>\n        <button type="button" class="input-number-btn input-number-btn-plus no-focus">+</button>\n        </div>'),C(e)}function C(e,t=null){let n=e.closest(".input-wrap-number"),i=e.min?+e.min:1/0,l=e.max?+e.max:1/0,a=e.step?+e.step:.1;e.addEventListener("change",()=>function(e){const t=e.value.replace(/,/g,".").replace(/[^0-9+\-*/.\se]/g,"");try{const n=Function(`'use strict'; return (${t})`)();isNaN(n)||(e.value=n)}catch(e){console.warn("Invalid calculation")}}(e));let s=n.querySelector(".input-number-btn-minus"),o=n.querySelector(".input-number-btn-plus");function c(e=null,t){e&&(e.value=t.value,e.dispatchEvent(new Event("input")))}s.addEventListener("click",n=>{let i=+(+e.value-a).toFixed(12);e.value=i,c(t,e)}),o.addEventListener("click",n=>{let i=+(+e.value+a).toFixed(12);e.value=i,c(t,e)}),t&&(e.addEventListener("input",n=>{t.value=e.value}),e.addEventListener("keyup",n=>{c(t,e)}),e.addEventListener("blur",n=>{c(t,e)})),e.addEventListener("keydown",t=>{let n=+e.value;38!=t.keyCode&&39!=t.keyCode&&40!=t.keyCode&&37!=t.keyCode||(38==t.keyCode||39==t.keyCode?n+=a:40!=t.keyCode&&37!=t.keyCode||(n-=a),n<i&&(n=i),n>l&&(n=l),e.value=+n.toFixed(8),e.dispatchEvent(new Event("input")))}),e.addEventListener("wheel",n=>{if(document.activeElement===e){n.preventDefault();let s=.05*n.deltaY,o=+e.value;s=Math.round(s/a)*a;let r=+(o-s).toFixed(8);r<i&&(r=i),r>l&&(r=l),e.value=r,e.dispatchEvent(new Event("input")),c(t,e)}},{passive:!1}),t&&t.addEventListener("input",n=>{e.value=t.value,e.dispatchEvent(new Event("input"))})}function B(e){let t=e.closest(".input-wrap-text");t||(t=document.createElement("div"),t.classList.add("input-wrap","input-wrap-boxed","input-wrap-text"),e.parentNode.insertBefore(t,e),t.append(e))}function j(e){let t=e.min?+e.min:0,n=e.max?+e.max:1/0,i=e.step?+e.step:.1,l=e.value?+e.value:0,a=e.closest(".input-wrap-range");if(a)return;e.classList.add("input-number-5"),a=document.createElement("div"),a.classList.add("input-wrap","input-wrap-range","input-wrap-range-num");let s=`<div class="input-wrap input-wrap-boxed input-wrap-number">\n            <input type="text" class="input input-active input-number-5 input-number no-focus" \n            name="num1" min="${t}" max="${n}" step="${i}" value="${l}" >\n            <div class="input-number-btns">\n                <button type="button" class="input-number-btn input-number-btn-minus no-focus">âˆ’</button>\n                <button type="button" class="input-number-btn input-number-btn-plus no-focus">+</button>\n            </div>\n        </div>`;e.parentNode.insertBefore(a,e),a.append(e),a.insertAdjacentHTML("beforeend",s),C(a.querySelector(".input-number"),e)}function N(e=null){if(!e)return;let t=e.querySelector("input[type=file]"),n=e.querySelector(".btn-file");n.classList.contains("input-active")||(n.addEventListener("click",t=>{e.querySelector("input[type=file]").click()}),t.addEventListener("input",t=>{let n=e.querySelector(".input-file-info"),i=[...t.currentTarget.files],l=[];i.forEach(e=>{let{name:t,size:n}=e;l.push(`${t} (${+(n/1024).toFixed(1)} KB)`)});let a='<ul class="input-file-ul">'+l.map(e=>`<li class="input-file-li">${e}</li>`).join(" ")+"</ul>";n.innerHTML=a}),n.classList.add("input-active"))}function I(e=null,t=null,n="input-file-drag-over"){if(!e||e.classList.contains("input-active"))return;let i=(t=t||e.querySelector("input[type=file]")).accept?t.accept.split(",").filter(Boolean).map(e=>e.trim()):[];["dragenter","dragover"].forEach(t=>{e.addEventListener(t,t=>{t.preventDefault(),t.stopPropagation(),e.classList.add(n)})}),["dragleave","drop"].forEach(t=>{e.addEventListener(t,t=>{t.preventDefault(),t.stopPropagation(),e.classList.remove(n)})}),e.addEventListener("drop",n=>{let l=e.querySelector(".input-file-info");l&&(l.textContent="");let a=n.dataTransfer.files,s=new DataTransfer;for(let e=0,t=a.length;e<t;e++){let t=a[e],n=t.type?"."+t.type.split("/").slice(-1):null,l="."+t.name.split(".").slice(-1);(i.includes(n)||i.includes(l))&&s.items.add(t)}if(s.files.length>0){t.files=s.files;let e=new Event("input");t.dispatchEvent(e)}else l&&(l.textContent="Invalid filetype")}),e.classList.add("input-active")}async function T(e=!1){let t=`${function(){try{performance.getEntries().slice(1)[0].name.split("/").slice(0,-1).join("/");let e=(new Error).stack.split("\n"),t=e[1]||e[2];return t?t.match(/(https?:\/\/[^\s]+)/)[1].split("/").slice(0,-1).join("/"):null}catch(e){return console.warn("Could not retrieve script path",e),null}}()}/iconSprite.svg`;if(!e){let e=await fetch(t);if(e.ok){let t=await e.text();document.body.insertAdjacentHTML("beforeend",t)}}let n=document.querySelectorAll("[data-icon]");for(let t=0,i=n.length;i&&t<i;t++){M(n[t],e)}}function M(e=null,t=!1){let n=e.dataset.icon.split(" ");if(e.classList.contains("icn-inj")||!n.length)return;let i=t?iconSvg:"",l=n.map(e=>`${i}#${e}`),a=n.length>1,s=n[0],o=e.nodeName.toLowerCase(),c=e.type?e.type:o,r="select-one"===c||"select-multiple"===c,u="input"===o||r,d=r||"date"===c||"time"===c,p=null,f="select"===c||!("checkbox"===c||"radio"===c)&&"button"!==c&&"div"!==c,m=e.dataset.iconPos?e.dataset.iconPos:f?"right":"left",v=e.closest(".toolbar-wrap");u&&!v&&(c=r?"select":c,e.classList.add("icn-input",`icn-input-${c}`,"icn-inj"),p=document.createElement("div"),p.classList.add("icn-wrp-input",`icn-wrp-${c}`),d&&(p.classList.add("icn-wrp-picker"),e.classList.add("icn-input-picker")),f&&p.classList.add("input-wrap","input-wrap-boxed"),e.parentNode.insertBefore(p,e),p.append(e),e=p);let b=t?null:document.getElementById(s),y="left"===m?"afterbegin":"beforeend",h="left"===m?"icn-svg-left":"icn-svg-right",w=d?"icn-picker icn-box":f?"icn-box":"";if(a){let t=`<div class="icn-wrp-multi icn-wrp-multi-${c} ${"left"===m?"icn-wrp-multi-left":"icn-wrp-multi-right"} ">`;for(let e=0,i=n.length;e<i;e++){let n=l[e];t+=`<svg class="icn-svg icn-${s} ${h} ${w} icn-svg-${e}" viewBox="${b?b.getAttribute("viewBox"):"0 0 24 24"}"><use  href="${n}"/></svg>`}t+="</div>",e.insertAdjacentHTML(y,t),e.classList.add("icn-inj")}else{let t=`<svg class="icn-svg icn-${s} ${h} ${w}" viewBox="${b?b.getAttribute("viewBox"):"0 0 24 24"}"><use  href="${l[0]}"/></svg>`;e.insertAdjacentHTML(y,t),e.classList.add("icn-inj")}}async function F(e=[]){!function(e=[]){for(let t=0,n=e.length;t<n;t++){let n=e[t];if(n.dataset.icon)continue;let i=n.nodeName.toLowerCase(),l=n.type?"select-one"===n.type?"select":n.type:i,a=n.dataset.type||null;"checkbox"===l?n.dataset.icon="checkbox-switch"===a?"checkbox-switch checkbox-switch-checked":"checkbox checkbox-checked":"radio"===l?n.dataset.icon="radio radio-checked":"select"===l?n.dataset.icon="chevron-down":"date"===l?n.dataset.icon="calendar":"time"===l?n.dataset.icon="clock":"search"===l&&(n.dataset.icon="magnifying-glass")}}(e),function(e=".enhanceInputs"){let t=document.querySelectorAll(`${e} input[type=text]`);for(let e=0,n=t.length;n&&e<n;e++)B(t[e])}(),function(e=".enhanceInputs",t="Upload File",n="Drop File"){let i=document.querySelectorAll(`${e} input[type=file]`);for(let e=0,l=i.length;e<l;e++){let l=i[e],a=l.closest(".input-wrap-file");if(a)continue;a=document.createElement("div"),a.classList.add("input-wrap","--input-wrap-boxed","input-wrap-file"),l.parentNode.insertBefore(a,l),a.append(l),l.classList.add("sr-only");let s=`<div class="btn-default btn-file" type="button" aria-hidden="true" data-icon="arrow-up-tray" data-icon-pos="left">\n            <span class="label-file">${t}</span><span class="label-file label-drop">${n}</span>\n          </div>\n          <p class="input-file-info"></p>`;a.insertAdjacentHTML("beforeend",s),N(a),I(a)}}(),function(e=".enhanceInputs"){let t=document.querySelectorAll(`${e} select`);for(let e=0;e<t.length;e++){let n=t[e];n.classList.contains(".input-active")||([...n.options].forEach(e=>{e.classList.add("option")}),n.onfocus=()=>{n.classList.add("input-select-focus")},n.oninput=()=>{n.classList.remove("input-select-focus")},n.onblur=()=>{n.classList.remove("input-select-focus")})}}(),function(e=".enhanceInputs"){let t=document.querySelectorAll(`${e} input[type=range].input-range-num, ${e} input[data-type=range-number]`);for(let e=0,n=t.length;n&&e<n;e++){let n=t[e];n.classList.add("input-range-num"),j(n)}}(),function(e=".enhanceInputs"){let t=document.querySelectorAll(`${e} input[type=number]`);for(let e=0,n=t.length;n&&e<n;e++)A(t[e])}(),S();T(!1),function(e=".enhanceInputs [title]"){let t=document.querySelectorAll(`${e}`);for(let e=0;e<t.length;e++){let n=t[e];if(n.classList.contains("has-tooltip"))continue;let i=n.closest(".input-wrap");i||(i=document.createElement("div"),i.classList.add("input-wrap","input-wrap-inline"),n.parentNode.insertBefore(i,n),i.append(n));let l=`<div class="tooltip tooltip-hidden">\n        ${n.title}\n        </div>`;n.classList.add("has-tooltip"),i.insertAdjacentHTML("beforeend",l)}}()}function H({selector:e="input",parent:t="main",storageName:n="settings"}={}){let i={},l=localStorage.getItem(n),a=l?JSON.parse(l):null,s=(document.querySelector(t)?document.querySelector(t):document).querySelectorAll(e),o=i.defaults?i.defaults:x(s);return i.defaults=o,a&&function(e={}){L(e)}(a),i=x(s,i),function(e,t={},n="settings"){e.forEach(e=>{e.classList.contains("input-active")||(e.addEventListener("input",i=>{E(e,t),g(t,n),document.dispatchEvent($)}),e.classList.add("input-active"))})}(s,i,n),k(i,n),s=document.querySelectorAll("input, select, textarea"),F(s),i}"undefined"!=typeof window&&(window.enhanceInputs=H);export{w as PI,e as abs,t as acos,n as asin,i as atan,l as atan2,a as ceil,s as cos,H as enhanceInputs,o as exp,c as floor,u as hypot,r as log,d as max,p as min,f as pow,m as random,v as round,b as sin,y as sqrt,h as tan};
