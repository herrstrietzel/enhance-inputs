const{abs:e,acos:t,asin:n,atan:l,atan2:a,ceil:i,cos:s,exp:o,floor:r,log:c,hypot:u,max:d,min:p,pow:f,random:m,round:v,sin:b,sqrt:h,tan:w,PI:g}=Math;function y(e={},t="settings"){if(t){let n=JSON.stringify(e);localStorage.setItem(t,n)}}function L(e={}){S(e)}function S(e={}){for(let t in e){let n=e[t],l=!0===n||!1===n;(t?document.querySelectorAll(`[name=${t}]`):[]).forEach(e=>{let t=e.type?e.type:e.nodeName.toLowerCase(),a="select-one"===t||"select-multiple"===t;if(l)e.checked=n;else if(a){Array.from(e.options).forEach(e=>{e.selected=!!n.includes(e.value)})}else if("radio"===t){let t=e.value===n;e.checked=!!t}else e.value=n})}}function E(e,t={}){return e.forEach(e=>{x(e,t)}),t}function x(e,t={}){let n=e.name,l=e.type?e.type:e.nodeName.toLowerCase(),a="select-one"===l||"select-multiple"===l,i="number"!==l||e.value?e.value:0;if(n){if("password"!==l){if("checkbox"===l)t[n]=!!e.checked;else if(a){let i=!!a&&"select-multiple"===l,s=e.options,o=Array.from(s).filter(e=>e.selected);t[n]=i?o.map(e=>e.value):o[0].value}else if("radio"===l){let e=document.querySelector(`[name=${n}]:checked`);t[n]=e?e.value:null}else{let a=!isNaN(i)&&""!==i;"password"!==l&&(t[n]=a?+i:e.value)}return t}t[n]=""}}function $(e={},t=!0){let n=function(e={},t=["defaults"],n=8e3){let l=[],a=1;for(let i in e){if(!Object.prototype.hasOwnProperty.call(e,i)||t.includes(i))continue;let s=e[i];if(null==s)continue;let o=(e,t)=>{let i=encodeURIComponent(e)+"="+encodeURIComponent(String(t).trim()),s=a+(l.length>0?1:0)+i.length;s<=n?(l.push(i),a=s):console.warn(`Skipping "${e}" — adding it would exceed maxLength (${n}).`)};if(Array.isArray(s))for(let e of s)null!=e&&o(i,e);else{o(i,isNaN(s)?String(s).trim():s)}}return l.length>0?"?"+l.join("&"):""}(e),l=window.location.pathname+n;t?window.history.replaceState({},"",l):window.history.pushState({},"",l)}const k=new Event("settingsChange");function q(e={},t="settings"){let n=document.getElementById("btnResetSettings");n&&n.addEventListener("click",n=>{!function(e={}){e.defaults&&Object.assign(e,e.defaults)}(e),localStorage.removeItem(t),S(e),y(e,t),$({}),document.dispatchEvent(k)})}function A(e){let t=e.closest(".input-wrap-number");if(t||(t=document.createElement("div"),t.classList.add("input-wrap-number"),e.parentNode.insertBefore(t,e),t.append(e)),t.querySelector(".input-number-btns"))return;let{min:n=0,max:l=100,step:a=1,value:i=0}=e,s=l?l.toString().length:0,o=a?a.toString().length:0;o=o>1?o:0,e.value=i;let r=s+o;r&&e.classList.add(`input-number-${r}`),e.type="text",e.title="Use Mousewheel or arrow keys to change values",e.classList.add("input-number","no-focus");t.insertAdjacentHTML("beforeend",'<div class="input-number-btns">\n        <button type="button" class="input-number-btn input-number-btn-minus no-focus">&minus;</button>\n        <button type="button" class="input-number-btn input-number-btn-plus no-focus">+</button>\n        </div>'),C(e)}function C(e,t=null){let n=e.closest(".input-wrap-number"),l=e.min?+e.min:1/0,a=e.max?+e.max:1/0,i=e.step?+e.step:.1;e.addEventListener("change",()=>function(e){const t=e.value.replace(/,/g,".").replace(/[^0-9+\-*/.\se]/g,"");try{const n=Function(`'use strict'; return (${t})`)();isNaN(n)||(e.value=n)}catch(e){console.warn("Invalid calculation")}}(e));let s=n.querySelector(".input-number-btn-minus"),o=n.querySelector(".input-number-btn-plus");function r(e=null,t){e&&(e.value=t.value,e.dispatchEvent(new Event("input")))}s.addEventListener("click",n=>{let a=+(+e.value-i).toFixed(12);e.value=a>=l?a:l,r(t,e)}),o.addEventListener("click",n=>{let l=+(+e.value+i).toFixed(12);e.value=l<=a?l:a,r(t,e)}),t&&(e.addEventListener("input",n=>{t.value=e.value}),e.addEventListener("keyup",n=>{r(t,e)}),e.addEventListener("blur",n=>{r(t,e)})),e.addEventListener("keydown",t=>{let n=+e.value;38!=t.keyCode&&39!=t.keyCode&&40!=t.keyCode&&37!=t.keyCode||(38==t.keyCode||39==t.keyCode?n+=i:40!=t.keyCode&&37!=t.keyCode||(n-=i),n<l&&(n=l),n>a&&(n=a),e.value=+n.toFixed(8),e.dispatchEvent(new Event("input")))}),e.addEventListener("wheel",n=>{if(document.activeElement===e){n.preventDefault();let s=.05*n.deltaY,o=+e.value;s=Math.round(s/i)*i;let c=+(o-s).toFixed(8);c<l&&(c=l),c>a&&(c=a),e.value=c,e.dispatchEvent(new Event("input")),r(t,e)}},{passive:!1}),t&&t.addEventListener("input",n=>{e.value=t.value,e.dispatchEvent(new Event("input"))})}function j(e){let t=e.closest(".input-wrap-range");if(t||(t=document.createElement("div"),t.classList.add("input-wrap-range"),e.parentNode.insertBefore(t,e),t.append(e)),t.classList.add("input-wrap-range-num"),t.querySelector(".input-number-btns"))return;let{min:n=0,max:l=100,step:a=1,value:i=0}=e,s=l?l.toString().length:0,o=a?a.toString().length:0;o=o>1?o:0;let r=s+o;r&&e.classList.add(`input-number-${r}`);let c=`<div class="input-wrap input-wrap-boxed input-wrap-number">\n            <input type="text" class="input input-active input-number-${r} input-number no-focus" \n            name="num1" min="${n}" max="${l}" step="${a}" value="${i}" >\n            <div class="input-number-btns">\n                <button type="button" class="input-number-btn input-number-btn-minus no-focus">−</button>\n                <button type="button" class="input-number-btn input-number-btn-plus no-focus">+</button>\n            </div>\n        </div>`;t.insertAdjacentHTML("beforeend",c),C(t.querySelector(".input-number"),e)}function I(e){let t=e.closest(".input-wrap");t.insertAdjacentHTML("beforeend",'<button type="button" class="icon-wrap btn-non btn-password btn-password" title="Show password">\n    <span class="icn-wrp icon-wrap icn-wrp-multi icn-pos-left" data-icon="eye-slash eye" ></span>\n    </button>');let n=t.querySelector(".btn-password");n.addEventListener("click",e=>{let l=t.querySelector("input"),{type:a}=l,i=n.querySelector(".icn-wrp-multi");"password"===a?(l.type="text",i.classList.add("icn-wrp-multi-1")):(l.type="password",i.classList.remove("icn-wrp-multi-1"))})}function N(e){let t=e.closest(".input-wrap-color");if(t||(t=document.createElement("div"),t.classList.add("input-wrap","input-wrap-color"),e.parentNode.insertBefore(t,e),t.append(e)),t.querySelector(".input-color-value"))return;let n=document.createElement("label");n.classList.add("label-input-color"),e.classList.add("sr-only"),n.append(e),n.insertAdjacentHTML("afterbegin",'<span class="input-color-value-preview" ></span>'),t.append(n),t.insertAdjacentHTML("afterbegin",'<span class="input-color-value-span">\n    <input type="text" class="input-color-value" value="" title="Enter color value" >\n</span>'),function(e,t=null){if(!t)return;let n=t.querySelector(".input-color-value");n.value=e.value;let l=t.querySelector(".input-color-value-preview");l.style.backgroundColor=e.value;let a=[];function i(e){if("string"!=typeof e||!e.startsWith("#"))throw new Error('Expected a hex color string starting with "#"');let t=e.slice(1).trim();if(3!==t.length&&4!==t.length||(t=t.split("").map(e=>e+e).join("")),6!==t.length&&8!==t.length)throw new Error("Invalid hex color format");let n=8===t.length,l=parseInt(t.slice(0,2),16),a=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16),s=n?parseInt(t.slice(6,8),16)/255:1;return n?[l,a,i,s]:[l,a,i]}function s(e){if(!Array.isArray(e)||3!==e.length&&4!==e.length)throw new Error("Expected an array of 3 (RGB) or 4 (RGBA) numeric values");let t=4===e.length,[n,l,a,i=1]=e,s="#"+[n,l,a,i].map(e=>Math.round(e).toString(16).padStart(2,"0")).join("").toLowerCase();return t||(console.log("alpha",e),s=s.substring(0,s.length-2)),s}e.addEventListener("input",t=>{let s=e.value;a=i(s);let o=4===a.length?`rgba(${a.join(", ")})`:`rgb(${a.join(", ")})`;n.value=o,l.style.backgroundColor=o}),n.addEventListener("input",t=>{let a=n.value;l.style.backgroundColor=a;let i=window.getComputedStyle(l).backgroundColor.replace(/[rgb|rgba|\(|\)]/g,"").split(", ").map(Number);4!==i.length||i[3];let o=s(i).substring(0,7);e.value=o})}(e,t)}function T(e=null){if(!e)return;let t=e.querySelector("input[type=file]"),n=e.querySelector(".btn-file");n.classList.contains("input-active")||(n.addEventListener("click",t=>{e.querySelector("input[type=file]").click()}),t.addEventListener("input",t=>{let n=e.querySelector(".input-file-info"),l=[...t.currentTarget.files],a=[];l.forEach(e=>{let{name:t,size:n}=e;a.push(`${t} (${+(n/1024).toFixed(1)} KB)`)});let i='<ul class="input-file-ul">'+a.map(e=>`<li class="input-file-li">${e}</li>`).join(" ")+"</ul>";n.innerHTML=i}),n.classList.add("input-active"))}function B(e=null,t=null,n="input-file-drag-over"){if(!e||e.classList.contains("droparea-active"))return;let l=(t=t||e.querySelector("input[type=file]")).accept?t.accept.split(",").filter(Boolean).map(e=>e.trim()):[".txt",".svg"];["dragenter","dragover"].forEach(t=>{e.addEventListener(t,t=>{t.preventDefault(),t.stopPropagation(),e.classList.add(n)})}),["dragleave","drop"].forEach(t=>{e.addEventListener(t,t=>{t.preventDefault(),t.stopPropagation(),e.classList.remove(n)})}),e.addEventListener("drop",n=>{let a=e.querySelector(".input-file-info");a&&(a.textContent="");let i=n.dataTransfer.files,s=new DataTransfer;for(let e=0,t=i.length;e<t;e++){let t=i[e],n=t.type?"."+t.type.split("/").slice(-1):null,a="."+t.name.split(".").slice(-1);l.includes(n)||l.includes(a)?s.items.add(t):console.warn("File type not allowed",n,a,l)}if(s.files.length>0){t.files=s.files;let e=new Event("input");t.dispatchEvent(e)}else a&&(a.textContent="Invalid filetype")}),e.classList.add("droparea-active")}function M(e=null,t="input-wrap-textarea",n="input-wrap-textarea-header",l="input-wrap-textarea-header-toolbar"){let a=e.closest(`.${t}`);a||(a=document.createElement("div"),a.classList.add(t,"input-wrap","input-wrap-boxed","input-wrap-textarea"),e.parentNode.insertBefore(a,e));let i=a.querySelector(`${n}`);if(i)return;e.spellcheck=!1,e.classList.add("input-textarea","no-focus","scrollbar","scroll-content","scroll-content-notrack","scroll-content-thin","scroll-content-hover");let s="label"===a.nodeName.toLowerCase(),o=s?null:a.previousElementSibling,r=!s&&"label"===o.nodeName.toLowerCase(),c=s?a:r?o:null;c&&c.classList.add("label-textarea");let u=e.getAttribute("accept")||".txt,.svg";if(i=document.createElement("header"),i.classList.add(n),a.append(i),s){let e=a.querySelector(".label-span");e&&i.append(e)}let d=e.dataset.file||"output.txt",p=e.dataset.tools,f=p?p.split(" "):[];if(!f.length)return;let m=`<div class="${l}">`,v={copy:"square-2-stack",download:"arrow-down-tray",upload:"arrow-up-tray"};f.forEach(e=>{"size"!==e?m+=`<button type="button" data-icon="${v[e]}" class="btn btn-non btn-toolbar btn-${e}" title="${e}" data-btn="${e}"></button>`:"size"==e&&(m+=`<span class="textarea-toolbar-span textarea-toolbar-span-size usr-slc-non" title="${e}"></span>`),"download"===e&&(m+=`<a href="" class="sr-only link-download" download="${d}"></div>`),"upload"===e&&(m+=`<input type="file" class="sr-only input-file" accept="${u}" >`)}),i.insertAdjacentHTML("beforeend",m),function(e=null,t=""){let n=e.querySelectorAll(".btn-toolbar"),l=e.querySelector(".textarea-toolbar-span-size");const a=e=>{let t=e.value.trim().length/1024,n=t<1024?"KB":"MB";return+(t<1024?t:t/1024).toFixed(3)+" "+n},i=(e,t)=>{let n=e.value;function l(){e.value!==n&&(n=e.value,t.textContent=a(e)),requestAnimationFrame(l)}requestAnimationFrame(l)};let s=l?.closest(`.${t}`)?.querySelector("textarea");s&&(l.textContent=a(s),i(s,l));n.forEach(e=>{let n=e.dataset.btn,l=e.closest(`.${t}`);if("upload"===n){let e=l.querySelector("input[type=file]");B(l.querySelector("textarea"),e),e.classList.contains("input-active")||(e.addEventListener("input",async e=>{let n=e.currentTarget,l=n.closest(`.${t}`).querySelector("textarea"),a=n.files[0];if(a){let e=await a.text();l.value=e,l.dispatchEvent(new Event("input"))}}),e.classList.add("input-active"))}e.classList.contains("input-active")||(e.addEventListener("click",e=>{let l=e.currentTarget.closest(`.${t}`),a=l.querySelector("textarea").value;if("copy"===n)navigator.clipboard.writeText(a);else if("download"===n){let e=l.querySelector(".link-download"),t=e.getAttribute("download")?e.getAttribute("download").split(".").slice(-1)[0]:"plain",n=URL.createObjectURL(new Blob([a],{type:`text/${t}`}));e.href=n,e.click()}else if("upload"===n){l.querySelector("input[type=file]").click()}}),e.classList.add("input-active"))})}(i,t)}async function F(e=!0,t="iconSprite_inputs.svg"){let n=`${function(){try{performance.getEntries().slice(1)[0].name.split("/").slice(0,-1).join("/");let e=(new Error).stack.split("\n"),t=e[1]||e[2];return t?t.match(/(https?:\/\/[^\s]+)/)[1].split("/").slice(0,-1).join("/"):null}catch(e){return console.warn("Could not retrieve script path",e),null}}()}/${t}`;if(e){let e=document.querySelector(".svgAssets");if(!e){e=document.createElement("div"),e.classList.add(".svgAssets");let t=await fetch(n);if(t.ok){let n=await t.text();e.insertAdjacentHTML("beforeend",n),document.body.append(e)}}}let l=document.querySelectorAll("[data-icon]");for(let t=0,a=l.length;a&&t<a;t++){H(l[t],e,n)}}function H(e=null,t=!0,n="iconSprite_inputs.svg"){let l=e.dataset.icon.split(" ");if(e.classList.contains("icn-inj")||!l.length)return;let a=l.length>1,i=l[0],s=t?"":n,o=l.map(e=>`${s}#${e}`),r=t?document.getElementById(i):null,c=e.dataset.iconPos?e.dataset.iconPos:"left",u="left"===c?"afterbegin":"beforeend",d=`icn-pos-${c}`,p=e.closest(".icn-wrp"),f="",m={"checkbox-switch":"0 0 36 24"};if(a)for(let e=0,t=l.length;e<t;e++){let t=o[e];f+=`<svg class="icn-svg icn-${i} ${d}  icn-svg-${e}" viewBox="${r?r.getAttribute("viewBox"):m[i]?m[i]:"0 0 24 24"}"><use  href="${t}"/></svg>`}else{f=`<svg class="icn-svg icn-${i} ${d}" viewBox="${r?r.getAttribute("viewBox"):"0 0 24 24"}"><use  href="${o[0]}"/></svg>`}p||(f=`<span class="icn-wrp icn-wrp-${i} icn-wrp-${c}">${f}</span>`),e.insertAdjacentHTML(u,f),e.classList.add("icn-inj")}async function O(e=[],t=!0,n="iconSprite_inputs.svg"){let l=["radio","checkbox","range","submit"],a="input-wrap";for(let t=0,n=e.length;n&&t<n;t++){let n=e[t],i=n.nodeName.toLowerCase(),s=n.type?n.type:i,o=n.closest("label");if(n.classList.add("input",`input-${s}`),"hidden"===s)continue;let r=o||document.createElement("div");if(r.classList.add(`${a}`,`${a}-${s}`),l.includes(s)||r.classList.add(`${a}-boxed`),o){let e=document.createElement("span");e.classList.add("label-span",`label-span-${s}`);let t=[...o.childNodes].find(e=>3===e.nodeType&&e.textContent.trim());n.parentNode.insertBefore(e,t),e.append(t),o.dataset.icon&&o.classList.add("input-wrap-icon")}o||(n.parentNode.insertBefore(r,n),r.append(n));let c="select-one"===s||"date"===s||"time"===s||"datetime-local"===s;c&&(n.classList.add("input-picker"),r.classList.add("input-wrap-picker")),"checkbox"!==s&&"radio"!==s&&"number"!==s&&(n.classList.add("input-wide"),r.classList.add("input-wrap-wide"));let u={checkbox:"checkbox checkbox-checked","checkbox-switch":"checkbox-switch checkbox-switch-checked",radio:"radio radio-checked","select-one":"chevron-down",date:"calendar","datetime-local":"calendar",time:"clock",search:"magnifying-glass"},{icon:d="",iconPos:p="left"}=n.dataset,f=n.dataset.type||null;if(u[s]||d){s=f||s;let e=d||u[s];n.removeAttribute("data-icon"),r.classList.add("input-wrap-icon");let t=c?"icn-input-picker":"";"select-one"!==s&&"date"!==s&&"time"!==s||(p="right");let l="left"===p?"beforebegin":"afterend",a=`<span class="icn-wrp icn-wrp ${e.split(" ").length>1?"icn-wrp-multi":""} ${t} icn-pos-${p} " data-icon="${e}" ></span>`;n.insertAdjacentHTML(l,a)}}!function(e=".enhanceInputs"){let t=document.querySelectorAll(`${e} input[type=color]`);for(let e=0,n=t.length;n&&e<n;e++)N(t[e])}(),function(e=".enhanceInputs"){let t=document.querySelectorAll(`${e} input[type=password]`);for(let e=0,n=t.length;n&&e<n;e++)I(t[e])}(),function(e=".enhanceInputs"){let t=document.querySelectorAll(`${e} input[type=range].input-range-num, ${e} input[data-type=range-number]`);for(let e=0,n=t.length;n&&e<n;e++){let n=t[e];n.classList.add("input-range-num"),j(n)}}(),function(e=".enhanceInputs"){let t=document.querySelectorAll(`${e} input[type=number]`);for(let e=0,n=t.length;n&&e<n;e++)A(t[e])}(),function(e=".enhanceInputs"){let t=document.querySelectorAll(`${e} textarea`);for(let e=0,n=t.length;n&&e<n;e++)M(t[e])}(),function(e=".enhanceInputs",t="Upload File",n="Drop File"){let l=document.querySelectorAll(`${e} input[type=file]`);for(let e=0,a=l.length;a&&e<a;e++){let a=l[e],i=a.closest(".input-wrap-file");if(a.closest(".input-wrap-textarea-header"))continue;i||(i=document.createElement("div"),i.classList.add("input-wrap","input-wrap-file"),a.parentNode.insertBefore(i,a),i.append(a));let s=i.querySelector(".icn-svg");if(i.querySelector(".btn-file-custom")||s)continue;a.classList.add("sr-only");let o=`<div class="btn-default btn-file btn-file-custom " type="button" aria-hidden="true" >\n        <span class="icn-wrp icn-wrp-file" data-icon="arrow-up-tray" data-icon-pos="left"></span>\n            <span class="label-file">${t}</span><span class="label-file label-drop">${n}</span>\n          </div>\n          <p class="input-file-info"></p>`;i.insertAdjacentHTML("beforeend",o),T(i),B(i)}}(),F(t,n),function(e=".enhanceInputs [title]"){let t=document.querySelectorAll(`${e}`);for(let e=0;e<t.length;e++){let n=t[e];if(n.classList.contains("has-tooltip"))continue;let l="button"===n.nodeName.toLowerCase()?n:n.closest(".input-wrap");l||(l=document.createElement("div"),l.classList.add("input-wrap","input-wrap-inline"),n.parentNode.insertBefore(l,n),l.append(n));let a=`<div class="tooltip tooltip-hidden">\n        ${n.title}\n        </div>`;n.classList.add("has-tooltip"),l.insertAdjacentHTML("beforeend",a)}}()}const U=Object.fromEntries(new URLSearchParams(document.location.search));function P(){const e=document.querySelector("[data-enhance-inputs]");let t={};if(e){let n={};const l=e.dataset.enhanceInputs;if(l)try{n=JSON.parse(l)}catch(e){console.warn("enhance-inputs: Invalid JSON in data-enhance-inputs",e)}t=R({storageName:"enhance_settings",parent:"body",selector:"input, select, textarea",cacheToUrl:!1,cacheToStorage:!1,...n});const a=new CustomEvent("settingsChange");document.dispatchEvent(a)}return t}function R({selector:e="input, select, textarea",parent:t="main",cacheToUrl:n=!0,cacheToStorage:l=!0,storageName:a="settings",embedSprite:i=!0}={}){let s={},o=(a=l?a:"")?localStorage.getItem(a):"",r=o?JSON.parse(o):{},c=(document.querySelector(t)?document.querySelector(t):document.body).querySelectorAll(e),u=s.defaults?s.defaults:E(c);if(s.defaults=u,n&&Object.values(U).length){let e=function(e={},t={}){let n=t;for(let t in e){let l=e[t];l="true"===l||"false"!==l&&l,n[t]=l}return n}(U,s);r={...r,...e},l||L(r)}return l&&Object.values(r).length&&L(r),s=E(c,s),function(e,t={},n="settings",l=!1){e.forEach(e=>{e.classList.contains("input-active")||(e.addEventListener("input",a=>{x(e,t),y(t,n),l&&$(t),document.dispatchEvent(k)}),e.classList.add("input-active"))})}(c,s,a,n),q(s,a),O(c,i),function(){let e=document.getElementById("inputDarkmode");e&&e.addEventListener("input",t=>{e.checked?document.body.classList.add("darkmode"):document.body.classList.remove("darkmode")})}(),s}if("undefined"!=typeof window){window.enhanceInputs=R,window.injectIcons=F;const e=P();window.enhanceInputsSettings=e}export{g as PI,e as abs,t as acos,n as asin,l as atan,a as atan2,i as ceil,s as cos,R as enhanceInputs,P as enhanceInputsAutoInit,o as exp,r as floor,u as hypot,c as log,d as max,p as min,f as pow,m as random,v as round,b as sin,h as sqrt,w as tan};
